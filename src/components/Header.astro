---
import { sanityClient } from "sanity:client";
import { getLang } from '@utils/getLang';

const lang = getLang(Astro.params);

const {header: headerContent } = await sanityClient.fetch(
    `*[_type == "landingPage" && !(_originalId in path("drafts.**"))][0]`
);

const basePathRedirectRoute = Astro.params.lang ? `/${Astro.params.lang}` : '';
---
<header class="sticky top-0 z-50 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-lg">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-20">
            <div class="flex items-center gap-3">
                <svg class="h-10 w-10 text-[var(--primary-color)]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
                </svg>
                <a href={`${basePathRedirectRoute}/`}>
                <h2 class="font-display text-2xl font-bold text-slate-900 dark:text-white"> Next Generation Academy</h2>
                </a>
            </div>
            <nav class="hidden md:flex items-center gap-10">
                <a href={`${basePathRedirectRoute}/about`} class="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-[var(--primary-color)] transition-colors">{headerContent?.navigation?.[0]?.[lang as 'pt' | 'en']}</a>
                <a href={`${basePathRedirectRoute}/waitlist`} class="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-[var(--primary-color)] transition-colors">{headerContent?.navigation?.[1]?.[lang as 'pt' | 'en']}</a>
                <a href={`${basePathRedirectRoute}/contact`} class="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-[var(--primary-color)] transition-colors">{headerContent?.navigation?.[2]?.[lang as 'pt' | 'en']}</a>
            </nav>
            <a class="hidden md:inline-flex items-center justify-center rounded-lg h-11 px-6 bg-[var(--primary-color)] text-white text-sm font-bold shadow-lg hover:bg-opacity-90 transition-all transform hover:-translate-y-0.5 glow-effect-sm" href="/waitlist">
                {headerContent?.cta?.[lang as 'pt' | 'en']}
            </a>
        </div>
    </div>
</header>